{"version":3,"sources":["../../src/router/fromClient.js"],"names":["fromClient","callback","fn","result","then","Promise","resolve","type","runOn","server","client"],"mappings":";;AAAA;;;;;AAIA;;;;;;;;;;;;;;;;;AAiBA,eAAe,SAASA,UAAT,CAAoBC,QAApB,EAA8B;AAC3C,MAAIC,EAAJ;;AAEA,MAAI,OAAOD,QAAP,KAAoB,UAAxB,EAAoC;AAClCC,IAAAA,EAAE,GAAG,cAAa;AAChB,UAAMC,MAAM,GAAGF,QAAQ,MAAR,mBAAf;;AAEA,UAAIE,MAAM,CAACC,IAAX,EAAiB;AACf;AACA,eAAOD,MAAP;AACD,OAHD,MAGO;AACL;AACA,eAAOE,OAAO,CAACC,OAAR,CAAgBH,MAAhB,CAAP;AACD;AACF,KAVD;AAWD,GAZD,MAYO;AACL;AACAD,IAAAA,EAAE,GAAGG,OAAO,CAACC,OAAR,CAAgBL,QAAhB,CAAL;AACD;;AAED,SAAO;AACLM,IAAAA,IAAI,EAAE,YADD;AAELC,IAAAA,KAAK,EAAE;AACLC,MAAAA,MAAM,EAAE,KADH;AACU;AACfC,MAAAA,MAAM,EAAE;AAFH,KAFF;AAMLR,IAAAA,EAAE,EAAFA;AANK,GAAP;AAQD","sourcesContent":["/**\n * @license\n * Copyright Â© 2017-2018 Moov Corporation.  All rights reserved.\n */\n/**\n * A handler that can be run on the client.  It will also be run on the server during server-side rendering.\n *\n * Example:\n *\n * ```js\n * router.get('/p/:id',\n *   fromClient({ view: 'Product' }),\n * \t fromServer('./product/Product')\n * )\n * ```\n *\n * @param {Function/Object} callback A function that takes the route params and returns an\n *  object to apply to the app state, or simply an object to apply to the app state. The\n *  shape of the object should match your `AppModel`.\n * @return {Object} A handler spec\n */\nexport default function fromClient(callback) {\n  let fn\n\n  if (typeof callback === 'function') {\n    fn = (...args) => {\n      const result = callback(...args)\n\n      if (result.then) {\n        // function that returns a promise that resolves to a patch\n        return result\n      } else {\n        // function that results a patch\n        return Promise.resolve(result)\n      }\n    }\n  } else {\n    // a static patch\n    fn = Promise.resolve(callback)\n  }\n\n  return {\n    type: 'fromClient',\n    runOn: {\n      server: 'ssr', // indicates to the router that this handler should only be run on the server when returning html (and not when returning json)\n      client: true\n    },\n    fn\n  }\n}\n"],"file":"fromClient.js"}