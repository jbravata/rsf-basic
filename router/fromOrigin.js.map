{"version":3,"sources":["../../src/router/fromOrigin.js"],"names":["transformParams","proxyUpstream","fromOrigin","backend","type","config","proxy","runOn","server","client","transformPath","path","routePath","rewrite_path_regex"],"mappings":";;AAAA;;;;AAKA,OAAOA,eAAP,MAA4B,mBAA5B;AACA,OAAOC,aAAP,MAA0B,iBAA1B;AAEA,eAAe,SAASC,UAAT,GAAwC;AAAA,MAApBC,OAAoB,uEAAV,QAAU;AACrD,MAAMC,IAAI,GAAG,YAAb;AACA,MAAMC,OAAM,GAAG;AACbC,IAAAA,KAAK,EAAE;AACLH,MAAAA,OAAO,EAAPA;AADK;AADM,GAAf;AAKA,MAAMI,KAAK,GAAG;AAAEC,IAAAA,MAAM,EAAE,IAAV;AAAgBC,IAAAA,MAAM,EAAE;AAAxB,GAAd;AAEA,2BACKR,aAAa,EADlB;AAEEG,IAAAA,IAAI,EAAJA,IAFF;AAGEC,IAAAA,MAAM,EAAE;AAAA,aAAMA,OAAN;AAAA,KAHV;AAKE;AACAK,IAAAA,aAAa,EAAE,uBAAAC,IAAI,EAAI;AACrB,aAAO;AACLP,QAAAA,IAAI,EAAJA,IADK;AAELG,QAAAA,KAAK,EAALA,KAFK;AAGLF,QAAAA,MAAM,EAAE,gBAAAO,SAAS,EAAI;AACnBP,UAAAA,OAAM,CAACC,KAAP,CAAaO,kBAAb,GAAkCb,eAAe,CAACY,SAAD,EAAYD,IAAZ,CAAjD;AACA,iBAAON,OAAP;AACD;AANI,OAAP;AAQD;AAfH;AAiBD","sourcesContent":["/**\n * @license\n * Copyright Â© 2017-2018 Moov Corporation.  All rights reserved.\n */\n\nimport transformParams from './transformParams'\nimport proxyUpstream from './proxyUpstream'\n\nexport default function fromOrigin(backend = 'origin') {\n  const type = 'fromOrigin'\n  const config = {\n    proxy: {\n      backend\n    }\n  }\n  const runOn = { server: true, client: false }\n\n  return {\n    ...proxyUpstream(),\n    type,\n    config: () => config,\n\n    // note as of react-storefront-edge@4.0.0, this is no longer used but is kept here for backwards compatibility\n    transformPath: path => {\n      return {\n        type,\n        runOn,\n        config: routePath => {\n          config.proxy.rewrite_path_regex = transformParams(routePath, path)\n          return config\n        }\n      }\n    }\n  }\n}\n"],"file":"fromOrigin.js"}