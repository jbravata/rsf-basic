{"version":3,"sources":["../../src/amp/installServiceWorker.js"],"names":["registerServiceWorker","prefetch","waitForServiceWorkerController","qs","then","window","location","search","length","parse","ignoreQueryPrefix","preload","JSON","forEach","url","e","console","error"],"mappings":";;;AAAA;;;;AAIA,OAAOA,qBAAP,MAAkC,0BAAlC;AACA,SAASC,QAAT,EAAmBC,8BAAnB,QAAyD,yBAAzD;AACA,OAAOC,EAAP,MAAe,IAAf;AAEAD,8BAA8B,GAAGE,IAAjC,CAAsC,YAAM;AAC1C,MAAIC,MAAM,CAACC,QAAP,CAAgBC,MAAhB,CAAuBC,MAA3B,EAAmC;AAAA,oBACbL,EAAE,CAACM,KAAH,CAASJ,MAAM,CAACC,QAAP,CAAgBC,MAAzB,EAAiC;AAAEG,MAAAA,iBAAiB,EAAE;AAArB,KAAjC,CADa;AAAA,QACzBC,OADyB,aACzBA,OADyB;;AAGjC,QAAIA,OAAJ,EAAa;AACX,UAAI;AACFC,QAAAA,IAAI,CAACH,KAAL,CAAWE,OAAX,EAAoBE,OAApB,CAA4B,UAAAC,GAAG;AAAA,iBAAIb,QAAQ,CAACa,GAAD,CAAZ;AAAA,SAA/B;AACD,OAFD,CAEE,OAAOC,CAAP,EAAU;AACVC,QAAAA,OAAO,CAACC,KAAR,2DAAiEN,OAAjE,GAA4EI,CAA5E;AACD;AACF;AACF;AACF,CAZD;AAcAf,qBAAqB","sourcesContent":["/**\n * @license\n * Copyright Â© 2017-2018 Moov Corporation.  All rights reserved.\n */\nimport registerServiceWorker from '../registerServiceWorker'\nimport { prefetch, waitForServiceWorkerController } from '../router/serviceWorker'\nimport qs from 'qs'\n\nwaitForServiceWorkerController().then(() => {\n  if (window.location.search.length) {\n    const { preload } = qs.parse(window.location.search, { ignoreQueryPrefix: true })\n\n    if (preload) {\n      try {\n        JSON.parse(preload).forEach(url => prefetch(url))\n      } catch (e) {\n        console.error(`could not parse preload list from query string: ${preload}`, e)\n      }\n    }\n  }\n})\n\nregisterServiceWorker()\n"],"file":"installServiceWorker.js"}